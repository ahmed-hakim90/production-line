.

âš ï¸ IMPORTANT:

Do NOT refactor existing layout.

Do NOT break current dashboard.

Extend architecture cleanly.

Keep Zustand and services structure intact.

ğŸ¯ OBJECTIVE

Implement:

A full Production Plans page.

A Quick Planning widget inside Dashboard.

Proper Firestore integration.

Dynamic calculations (no derived data stored).

ğŸ”¹ STEP 1 â€” Create New Collection

Create Firestore collection:

production_plans

Structure:

{
productId: string,
lineId: string,
plannedQuantity: number,
startDate: timestamp,
status: "planned" | "in_progress" | "completed" | "paused",
createdBy: userId,
createdAt: serverTimestamp()
}

Do NOT store computed values like capacity or days.

ğŸ”¹ STEP 2 â€” Create New Page

Create:

/production-plans

This page must include:

Section 1 â€” Create New Plan Form

Fields:

Product (dropdown)

Line (dropdown)

Planned Quantity

Start Date

When user enters quantity:
Dynamically calculate:

Average Assembly Time (from reports)

Daily Capacity of selected line

Estimated days required

Display calculations live before saving.

Button:
"Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø©"

Section 2 â€” Plans Table

Display all production plans with:

Product

Line

Planned Quantity

Start Date

Status

Progress %

Remaining Quantity

Actions (Edit / Change Status / View)

Progress must be calculated dynamically:

actualProducedFromReports / plannedQuantity

Do NOT store progress in Firestore.

ğŸ”¹ STEP 3 â€” Dashboard Widget

In dashboard left section:

Create Quick Planning Widget:

Fields:

Product

Quantity

When quantity entered:
Calculate:

Best line suggestion

Daily capacity per line

Estimated days

Button:
"Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© Ø±Ø³Ù…ÙŠØ©"

On click:
Redirect to /production-plans
Pre-fill form with selected product and quantity.

ğŸ”¹ STEP 4 â€” Calculations

Use utils for all calculations.

Average Assembly Time:
sum(workers Ã— hours) / sum(quantityProduced)

Daily Capacity:
(maxWorkers Ã— dailyWorkingHours) / avgAssemblyTime

Estimated Days:
plannedQuantity / dailyCapacity

Progress:
actualProduced / plannedQuantity

All calculations must remain dynamic.

ğŸ”¹ STEP 5 â€” Role Permissions

supervisor:

Cannot create plan.

hall_supervisor:

Can create and edit plan.

factory_manager:

Can view only.

admin:

Full control.

Hide unauthorized actions completely.

ğŸ”¹ STEP 6 â€” Performance

Fetch reports by product + line only.

Avoid loading full history unnecessarily.

Use memoized selectors where needed.

ğŸ”¹ STEP 7 â€” Code Quality

Keep UI clean and Arabic RTL.

No Firestore calls inside components.

Use services layer.

Use Zustand actions.

Modular and production-ready code.

ğŸ”¥ FINAL RESULT

System should now support:

Official production planning

Live progress tracking

Smart capacity calculation

Role-based control

Clean ERP-style interface

Do not redesign UI.
Focus on logic and clean implementation.